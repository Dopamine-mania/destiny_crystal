<view class="container">
  <view class="header">
    <view class="title">
      <text class="icon">ğŸ’³</text>
      <text class="title-text">æ”¯ä»˜è®¢å•</text>
    </view>
  </view>

  <view class="order-summary">
    <view class="summary-title">è®¢å•è¯¦æƒ…</view>
    <view class="order-items">
      <view wx:for="{{cartItems}}" wx:key="id" class="order-item">
        <view class="item-info">
          <text class="item-name">{{item.name}}</text>
          <text class="item-quantity">x{{item.quantity}}</text>
        </view>
        <text class="item-total">Â¥{{item.price * item.quantity}}</text>
      </view>
    </view>
    <view class="total-line">
      <text class="total-label">æ€»è®¡:</text>
      <text class="total-amount">Â¥{{totalAmount}}</text>
    </view>
  </view>

  <!-- æ”¶è´§åœ°å€ -->
  <view class="address-section">
    <view class="section-title">æ”¶è´§åœ°å€</view>
    <view class="address-card" bindtap="onSelectAddress">
      <view wx:if="{{selectedAddress}}" class="address-content">
        <view class="address-header">
          <text class="recipient-name">{{selectedAddress.name}}</text>
          <text class="recipient-phone">{{selectedAddress.phone}}</text>
          <text wx:if="{{selectedAddress.tag}}" class="address-tag">{{selectedAddress.tag}}</text>
        </view>
        <view class="address-detail">
          <text class="address-text">{{selectedAddress.fullAddress}}</text>
        </view>
      </view>
      <view wx:else class="no-address">
        <text class="no-address-icon">ğŸ“</text>
        <text class="no-address-text">è¯·é€‰æ‹©æ”¶è´§åœ°å€</text>
      </view>
      <view class="address-arrow">
        <text class="arrow-icon">â†’</text>
      </view>
    </view>
  </view>

  <view class="payment-methods">
    <view class="payment-title">é€‰æ‹©æ”¯ä»˜æ–¹å¼</view>
    <view class="payment-options">
      <view 
        wx:for="{{paymentMethods}}" 
        wx:key="id" 
        class="payment-option {{selectedPayment === item.id ? 'selected' : ''}} {{!item.enabled ? 'disabled' : ''}}"
        bindtap="onPaymentMethodTap"
        data-id="{{item.id}}"
      >
        <view class="payment-left">
          <text class="payment-icon">{{item.icon}}</text>
          <view class="payment-info">
            <text class="payment-name">{{item.name}}</text>
            <text wx:if="{{!item.enabled}}" class="payment-tip">{{item.tip}}</text>
          </view>
        </view>
        <view class="payment-radio">
          <text wx:if="{{selectedPayment === item.id && item.enabled}}" class="radio-checked">â—</text>
          <text wx:else class="radio-unchecked">â—‹</text>
        </view>
      </view>
    </view>
  </view>

  <view class="payment-actions">
    <button class="action-btn secondary" bindtap="onBack">
      <text class="btn-icon">â¬…ï¸</text>
      <text>è¿”å›</text>
    </button>
    <button 
      class="action-btn primary {{isLoading ? 'loading' : ''}}"
      bindtap="onConfirmPayment"
      disabled="{{isLoading}}"
    >
      <text class="btn-icon">{{isLoading ? 'â³' : 'ğŸ’°'}}</text>
      <text>{{isLoading ? 'å¤„ç†ä¸­...' : 'ç¡®è®¤æ”¯ä»˜'}}</text>
    </button>
  </view>

  <view wx:if="{{isLoading}}" class="payment-processing">
    <view class="processing-overlay">
      <view class="processing-content">
        <text class="processing-icon">â³</text>
        <text class="processing-text">æ­£åœ¨å¤„ç†æ”¯ä»˜...</text>
      </view>
    </view>
  </view>
</view>
