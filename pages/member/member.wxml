<view class="container">
  <!-- 页面头部 -->
  <view class="header">
    <view class="header-top">
      <view class="back-btn" bindtap="onBack">
        <text class="back-icon">←</text>
      </view>
      <view class="title">
        <text class="icon">👑</text>
        <text class="title-text">会员中心</text>
      </view>
      <view class="status-btn" bindtap="onViewCurrentMember">
        <text class="status-icon">ℹ️</text>
      </view>
    </view>
    <view class="subtitle">
      <text class="subtitle-text">解锁专属权益，享受深度分析</text>
    </view>
  </view>

  <!-- 会员特权展示 -->
  <view class="privileges-section">
    <view class="section-title">🌟 会员特权</view>
    <view class="privileges-grid">
      <view class="privilege-item">
        <text class="privilege-icon">✨</text>
        <text class="privilege-text">解锁所有深度分析</text>
      </view>
      <view class="privilege-item">
        <text class="privilege-icon">🎯</text>
        <text class="privilege-text">专属喜用神推荐</text>
      </view>
      <view class="privilege-item">
        <text class="privilege-icon">💎</text>
        <text class="privilege-text">个性化水晶方案</text>
      </view>
      <view class="privilege-item">
        <text class="privilege-icon">🚀</text>
        <text class="privilege-text">优先客服支持</text>
      </view>
      <view class="privilege-item">
        <text class="privilege-icon">📊</text>
        <text class="privilege-text">每月免费报告</text>
      </view>
      <view class="privilege-item">
        <text class="privilege-icon">🎫</text>
        <text class="privilege-text">专属优惠券</text>
      </view>
    </view>
  </view>

  <!-- 套餐选择 -->
  <view class="plans-section">
    <view class="section-title">📦 选择套餐</view>
    <view class="plans-grid">
      <view 
        wx:for="{{memberPlans}}" 
        wx:key="id" 
        class="plan-card {{selectedPlan === item.id ? 'selected' : ''}}"
        bindtap="onPlanSelect"
        data-plan="{{item.id}}"
      >
        <!-- 推荐标签 -->
        <view wx:if="{{item.badge}}" class="plan-badge">
          <text class="badge-text">{{item.badge}}</text>
        </view>

        <!-- 套餐头部 -->
        <view class="plan-header">
          <view class="plan-name">{{item.name}}</view>
          <view class="plan-description">{{item.description}}</view>
        </view>

        <!-- 价格信息 -->
        <view class="plan-pricing">
          <view class="current-price">
            <text class="price-symbol">¥</text>
            <text class="price-value">{{item.price}}</text>
            <text class="price-unit">/{{item.duration}}</text>
          </view>
          <view class="original-price">
            <text class="original-text">原价 ¥{{item.originalPrice}}</text>
          </view>
          <view class="savings">
            <text class="savings-text">{{item.savings}}</text>
          </view>
        </view>

        <!-- 特权列表 -->
        <view class="plan-features">
          <view wx:for="{{item.features}}" wx:key="index" class="feature-item">
            <text class="feature-icon">✓</text>
            <text class="feature-text">{{item}}</text>
          </view>
        </view>

        <!-- 选中状态 -->
        <view class="plan-selection">
          <view class="selection-indicator {{selectedPlan === item.id ? 'selected' : ''}}">
            <text class="selection-text">{{selectedPlan === item.id ? '✓' : '○'}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- 支付方式 -->
  <view class="payment-section">
    <view class="section-title">💳 支付方式</view>
    <view class="payment-methods">
      <view 
        wx:for="{{paymentMethods}}" 
        wx:key="id" 
        class="payment-method {{item.selected ? 'selected' : ''}}"
        bindtap="onPaymentMethodSelect"
        data-method="{{item.id}}"
      >
        <view class="method-info">
          <text class="method-icon">{{item.icon}}</text>
          <view class="method-details">
            <text class="method-name">{{item.name}}</text>
            <text class="method-desc">{{item.desc}}</text>
          </view>
        </view>
        <view class="method-selection">
          <text class="selection-radio">{{item.selected ? '●' : '○'}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 协议确认 -->
  <view class="agreement-section">
    <view class="agreement-check" bindtap="onAgreeToggle">
      <text class="agreement-checkbox">{{agreeAgreement ? '☑️' : '☐'}}</text>
      <text class="agreement-text">我已阅读并同意</text>
      <text class="agreement-link" bindtap="onViewAgreement" catchtap="true">《会员服务协议》</text>
    </view>
  </view>

  <!-- 购买按钮 -->
  <view class="purchase-section">
    <view class="price-summary">
      <text class="summary-text">应付金额：</text>
      <text class="summary-price">¥{{currentPlanPrice}}</text>
    </view>
    <button 
      class="purchase-btn {{agreeAgreement && !isProcessing ? 'active' : 'disabled'}}"
      bindtap="onPurchase"
      disabled="{{!agreeAgreement || isProcessing}}"
    >
      <text class="btn-icon">{{isProcessing ? '⏳' : '👑'}}</text>
      <text class="btn-text">{{isProcessing ? '处理中...' : '立即开通会员'}}</text>
    </button>
  </view>

  <!-- 底部说明 -->
  <view class="bottom-info">
    <view class="info-item">
      <text class="info-icon">🔒</text>
      <text class="info-text">支付安全由微信/支付宝保障</text>
    </view>
    <view class="info-item">
      <text class="info-icon">🔄</text>
      <text class="info-text">支持7天无理由退款</text>
    </view>
    <view class="info-item">
      <text class="info-icon">📞</text>
      <text class="info-text">24小时客服支持</text>
    </view>
  </view>
</view>