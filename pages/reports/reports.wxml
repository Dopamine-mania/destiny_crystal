<view class="container">
  <!-- é¡µé¢å¤´éƒ¨ -->
  <view class="header">
    <view class="header-top">
      <view class="back-btn" bindtap="onBack">
        <text class="back-icon">â†</text>
      </view>
      <view class="title">
        <text class="icon">ğŸ“Š</text>
        <text class="title-text">æˆ‘çš„æŠ¥å‘Š</text>
      </view>
      <view class="new-btn" bindtap="onCreateNew">
        <text class="new-icon">+</text>
      </view>
    </view>
    <view class="subtitle">
      <text class="count-text">å…±{{reports.length}}ä»½æŠ¥å‘Š</text>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{isLoading}}" class="loading">
    <text class="loading-icon">â³</text>
    <text class="loading-text">åŠ è½½æŠ¥å‘Šåˆ—è¡¨ä¸­...</text>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:elif="{{isEmpty}}" class="empty-state">
    <text class="empty-icon">ğŸ“„</text>
    <text class="empty-title">æš‚æ— æŠ¥å‘Š</text>
    <text class="empty-desc">æ‚¨è¿˜æ²¡æœ‰ç”Ÿæˆè¿‡å‘½ç†æŠ¥å‘Š</text>
    <button class="create-btn" bindtap="onCreateNew">
      <text class="btn-icon">âœ¨</text>
      <text class="btn-text">ç«‹å³ç”ŸæˆæŠ¥å‘Š</text>
    </button>
  </view>

  <!-- æŠ¥å‘Šåˆ—è¡¨ -->
  <view wx:else class="reports-list">
    <view 
      wx:for="{{reports}}" 
      wx:key="id" 
      class="report-card {{item.status}}"
      bindtap="onReportTap"
      data-id="{{item.id}}"
    >
      <!-- çŠ¶æ€æ ‡ç­¾ -->
      <view wx:if="{{item.status === 'generating'}}" class="status-badge generating">
        <text class="status-text">ç”Ÿæˆä¸­</text>
      </view>
      <view wx:elif="{{item.status === 'failed'}}" class="status-badge failed">
        <text class="status-text">ç”Ÿæˆå¤±è´¥</text>
      </view>
      <view wx:elif="{{item.isPremium}}" class="status-badge premium">
        <text class="status-text">æ·±åº¦ç‰ˆ</text>
      </view>

      <!-- æŠ¥å‘Šå†…å®¹ -->
      <view class="report-content">
        <view class="report-header">
          <view class="user-info">
            <text class="user-name">{{item.name}}</text>
            <view class="day-master">
              <text class="master-text">{{item.dayMaster}}</text>
            </view>
          </view>
          <view class="create-time">
            <text class="time-text">{{item.createTime}}</text>
          </view>
        </view>

        <view class="birth-info">
          <view class="birth-item">
            <text class="birth-label">å‡ºç”Ÿæ—¥æœŸ:</text>
            <text class="birth-value">{{item.birthDate}}</text>
          </view>
          <view class="birth-item">
            <text class="birth-label">å‡ºç”Ÿæ—¶è¾°:</text>
            <text class="birth-value">{{item.birthTime}}</text>
          </view>
        </view>

        <view class="report-preview">
          <text class="preview-text">{{item.thumbnail}}</text>
        </view>

        <!-- æ“ä½œæŒ‰é’® -->
        <view class="report-actions" catchtap="true">
          <button 
            wx:if="{{item.status === 'completed'}}"
            class="action-btn view-btn"
            bindtap="onReportTap"
            data-id="{{item.id}}"
          >
            <text class="btn-icon">ğŸ‘</text>
            <text class="btn-text">æŸ¥çœ‹</text>
          </button>
          
          <button 
            wx:elif="{{item.status === 'failed'}}"
            class="action-btn retry-btn"
            bindtap="onReportTap"
            data-id="{{item.id}}"
          >
            <text class="btn-icon">ğŸ”„</text>
            <text class="btn-text">é‡è¯•</text>
          </button>

          <button 
            wx:if="{{item.status === 'completed'}}"
            class="action-btn share-btn"
            bindtap="onShareReport"
            data-id="{{item.id}}"
          >
            <text class="btn-icon">ğŸ“¤</text>
            <text class="btn-text">åˆ†äº«</text>
          </button>

          <button 
            class="action-btn delete-btn"
            bindtap="onDeleteReport"
            data-id="{{item.id}}"
          >
            <text class="btn-icon">ğŸ—‘</text>
            <text class="btn-text">åˆ é™¤</text>
          </button>
        </view>
      </view>

      <!-- ç”Ÿæˆä¸­çš„è¿›åº¦æç¤º -->
      <view wx:if="{{item.status === 'generating'}}" class="generating-overlay">
        <view class="generating-content">
          <text class="generating-icon">â³</text>
          <text class="generating-text">æ­£åœ¨ç”Ÿæˆå‘½ç†æŠ¥å‘Š...</text>
          <view class="progress-bar">
            <view class="progress-fill"></view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨æç¤º -->
  <view wx:if="{{!isLoading && !isEmpty}}" class="bottom-tip">
    <text class="tip-text">ğŸ’¡ ç‚¹å‡»æŠ¥å‘Šå¡ç‰‡å¯æŸ¥çœ‹è¯¦æƒ…</text>
  </view>
</view>